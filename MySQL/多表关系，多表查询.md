```mysql
1.多表关系
一对多：在多的一方设置外键，关联另一方的主键
多对多：建立中间表，中间表包含两个外键，关联两张表的主键
一对一：用于表结构的拆分，在其中任何一方设置外键（UNIQUE）,关联另一方的主键
```

```mysql
2.多表查询 （内外自）
-- 多表查询 消除笛卡尔积
select *
from emp ,dept where emp.dept_id = dept.id;

-- 内连接演示
-- 1. 查询每一个员工的姓名 , 及关联的部门的名称 (隐式内连接实现)
-- 表结构: emp , dept
-- 连接条件: emp.dept_id = dept.id
select emp.name, dept.name from emp, dept where emp.dept_id = dept.id;

select e.name,d.name from emp e , dept d where e.dept_id = d.id;

-- (显式内连接实现)  --- INNER JOIN ... ON ... (JOIN可以省略)
select e.name, d.name
from emp e  inner join dept d on e.dept_id = d.id;


-- 外连接演示
-- 1. 查询emp表的所有数据, 和对应的部门信息(左外连接)
-- 表结构: emp, dept
-- 连接条件: emp.dept_id = dept.id
select e.*, d.name from emp e left join dept d on e.dept_id = d.id;


-- 2. 查询dept表的所有数据, 和对应的员工信息(右外连接)
select d.*,e.* from emp e right join dept d on e.dept_id = d.id;


-- 自连接
-- 1. 查询员工 及其 所属领导的名字
-- 表结构: emp
select a.name, b.name from emp a ,emp b where a.managerid = b.id;

-- 2. 查询所有员工 emp 及其领导的名字 emp , 如果员工没有领导, 也需要查询出来
-- 表结构: emp a , emp b
select a.name '员工', b.name '领导' from emp a left join emp b on a.managerid = b.id;


-- union all , union(去重) 字段列数和类型保持一致
-- 1. 将薪资低于 5000 的员工 , 和 年龄大于 50 岁的员工全部查询出来.
select * from emp where salary < 5000
union
select * from emp where age > 50;


```

```mysql
3.子查询
-- 标量子查询
-- 1. 查询 "销售部" 的所有员工信息
-- a.查询销售部的部门id
select id
from dept where name = '销售部';
-- b.根据销售部部门id，查询员工信息
select *
from emp where dept_id = 4;

select *
from emp where dept_id = (select id from dept where name = '销售部');


-- 2. 查询在 "方东白" 入职之后的员工信息
-- a. 查询 方东白 的入职日期
select entrydate
from emp where name = '方东白';
-- b. 查询指定入职日期之后入职的员工信息
select *
from emp where entrydate > '2009-02-12';

select *
from emp where entrydate > (select entrydate from emp where name = '方东白');


-- 列子查询
-- 1. 查询 "销售部" 和 "市场部" 的所有员工信息

-- a. 查询 "销售部" 和 "市场部" 的部门ID
select id
from dept where name = '销售部' or  name = '市场部';
-- b. 根据部门ID, 查询员工信息
select *
from emp where dept_id in (2,4);

select *
from emp where dept_id in (select id from dept where name = '销售部' or  name = '市场部');


-- 2. 查询比 财务部 所有人工资都高的员工信息
-- a. 查询所有 财务部 人员工资
select id
from dept where name = '财务部';
select salary
from emp where dept_id = (select id from dept where name = '财务部');
-- b. 比 财务部 所有人工资都高的员工信息
select *
from emp where salary > all (select salary from emp where dept_id = (select id from dept where name = '财务部'));


-- 3. 查询比研发部其中任意一人工资高的员工信息
-- a. 查询研发部所有人工资
select id
from dept where name  = '研发部';
select salary
from emp where dept_id = (select id from dept where name  = '研发部');
-- b. 比研发部其中任意一人工资高的员工信息
select *
from emp where salary > any (select salary from emp where dept_id = (select id from dept where name  = '研发部'));


-- 行子查询
-- 1. 查询与 "张无忌" 的薪资及直属领导相同的员工信息 ;
-- a. 查询 "张无忌" 的薪资及直属领导
select salary,managerid
from emp where name = '张无忌';
-- b. 查询与 "张无忌" 的薪资及直属领导相同的员工信息 ;
select *
from emp where (salary,managerid ) = (12500,1) ;
select *
from emp where (salary,managerid ) = (select salary,managerid from emp where name = '张无忌') ;


-- 表子查询
-- 1. 查询与 "鹿杖客" , "宋远桥" 的职位和薪资相同的员工信息
-- a. 查询 "鹿杖客" , "宋远桥" 的职位和薪资
select job,salary
from emp where name = '鹿杖客' or name = '宋远桥';
-- b. 查询与 "鹿杖客" , "宋远桥" 的职位和薪资相同的员工信息
select *
from emp where (job,salary) in (select job,salary from emp where name = '鹿杖客' or name = '宋远桥');


-- 2. 查询入职日期是 "2006-01-01" 之后的员工信息 , 及其部门信息
-- a. 入职日期是 "2006-01-01" 之后的员工信息
select *
from emp where entrydate > '2006-01-01';
-- b. 查询这部分员工, 对应的部门信息;
select e.*,d.*
from (select * from emp where entrydate > '2006-01-01') e left join dept d on e.dept_id = d.id ;

```

